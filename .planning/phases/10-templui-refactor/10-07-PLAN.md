---
phase: 10-templui-refactor
plan: 07
type: execute
wave: 3
depends_on: ["10-06"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All pages render without errors"
    - "Dark mode works correctly on all pages"
    - "All HTMX interactions work"
    - "All forms submit correctly"
    - "All navigation works"
    - "Visual consistency achieved"
  artifacts: []
  key_links: []
---

<objective>
Final verification and cleanup of templUI refactor

Purpose: Verify all pages work correctly, dark mode functions throughout, and clean up any unused custom component code.

Output: Verified, consistent application with templUI components
</objective>

<execution_context>
@/home/bjk/.claude/get-shit-done/workflows/execute-plan.md
@/home/bjk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-templui-refactor/10-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Full application test pass</name>
  <files></files>
  <action>
Perform a comprehensive test of all pages and functionality:

**1. Navigation Test:**
- Visit every page via sidebar navigation:
  - Dashboard (/)
  - Documents (/documents)
  - Upload (/upload)
  - Inboxes (/inboxes)
  - Network Sources (/network-sources)
  - Tags (/tags)
  - Correspondents (/correspondents)
  - AI (/ai)
  - Queues (/queues)
- Verify sidebar renders correctly on each page
- Verify breadcrumbs work (on document detail)

**2. Dark Mode Test:**
- Toggle dark mode via header button
- Visit each page and verify:
  - Background colors switch correctly
  - Text is readable
  - Borders are visible
  - Cards have appropriate contrast
  - Badges are visible
  - Alerts are visible
  - Form inputs are usable

**3. Form Submission Test:**
- Add inbox (verify HTMX works)
- Add network source (verify HTMX works)
- Add tag (verify dialog + HTMX works)
- Save AI settings (verify HTMX works)
- Search documents (verify debounce + filters work)
- Upload a document (verify upload works)

**4. Interactive Element Test:**
- Toggle inbox enable/disable
- Toggle network source enable/disable
- Delete a tag (verify confirmation + HTMX)
- Edit a tag (verify dialog edit mode)
- Click document to view detail
- View PDF (verify modal)
- Download document

**5. Status Badge Test:**
- Verify pending documents show correct badge
- Verify completed documents show correct badge
- Verify failed documents show retry button

**6. Responsive Test:**
- Resize browser to mobile width
- Verify sidebar becomes sheet/mobile menu
- Verify tables are scrollable or responsive
- Verify forms are usable on mobile

Document any issues found for fixing.
  </action>
  <verify>
Create a checklist of all tested functionality:
- [ ] Navigation works
- [ ] Dark mode works
- [ ] Forms submit correctly
- [ ] Interactive elements work
- [ ] Status badges display correctly
- [ ] Mobile responsive
  </verify>
  <done>
- All pages load without errors
- All functionality works correctly
- No visual regressions
- Dark mode fully functional
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete templUI refactor of the entire application</what-built>
  <how-to-verify>
1. Start the dev server (`make dev`)
2. Open http://localhost:3000 in browser

**Check each page:**

| Page | URL | Check |
|------|-----|-------|
| Dashboard | / | Cards render, quick actions work |
| Documents | /documents | Table renders, search works, filters work |
| Upload | /upload | Drag-drop works, file upload works |
| Inboxes | /inboxes | Form submits, toggle works, delete works |
| Network Sources | /network-sources | Form submits, test/sync buttons work |
| Tags | /tags | Dialog opens, create/edit/delete work |
| Correspondents | /correspondents | CRUD operations work |
| AI Settings | /ai | Form saves, provider cards render |
| AI Review | /ai/review | Suggestion cards render, accept/reject work |
| Queues | /queues | Queue stats render correctly |
| Document Detail | /documents/{id} | Tabs work, buttons work, PDF viewer works |
| Login | /login | Form submits, error shows correctly |

**Test dark mode:**
- Toggle theme via header button
- Verify all pages are readable and styled correctly in both modes

**Test mobile:**
- Resize to mobile width (< 768px)
- Verify sidebar collapses to mobile menu
- Verify all content is accessible
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Cleanup unused code (if needed)</name>
  <files></files>
  <action>
Based on verification results, clean up any issues:

1. **If unused custom templates remain:**
   - Check for any custom component templates that were fully replaced
   - Remove unused helper functions
   - Remove unused CSS classes (if any custom styles were added)

2. **If script includes are missing:**
   - Ensure all pages that use interactive templUI components include the corresponding Script() call
   - Common ones: tabs.Script(), dialog.Script(), sidebar.Script(), input.Script(), selectbox.Script()

3. **If dark mode has issues:**
   - Check for hard-coded colors that should use theme variables
   - Replace bg-white with bg-background or bg-card
   - Replace text-gray-* with text-foreground or text-muted-foreground
   - Replace border-gray-* with border-border or border-input

4. **If HTMX interactions broke:**
   - Check that hx-* attributes are on the correct elements
   - Check that IDs match hx-target selectors
   - Verify hx-swap values are appropriate

5. **Documentation update:**
   - Update CLAUDE.md if any new patterns were established
   - No need to create separate documentation unless significant patterns emerged

Run `make test` to verify no test regressions.
Run `make lint` to verify code quality.
  </action>
  <verify>
- `make dev` runs without errors
- `make test` passes
- `make lint` passes (or only pre-existing issues)
  </verify>
  <done>
- Any issues from verification are fixed
- Code is clean and passes tests
- No unused code remains
  </done>
</task>

</tasks>

<verification>
1. All pages render correctly
2. All interactive functionality works
3. Dark mode works throughout
4. Mobile responsive works
5. Tests pass
6. Lint passes
</verification>

<success_criteria>
- Full application verified working
- User confirms visual quality
- No regressions in functionality
- Phase 10 objectives met:
  1. Custom form elements replaced with templUI components
  2. Custom modals use templUI dialog component
  3. Custom buttons/inputs standardized across the app
  4. UI styling is consistent throughout the application
</success_criteria>

<output>
After completion, create `.planning/phases/10-templui-refactor/10-07-SUMMARY.md`
</output>
