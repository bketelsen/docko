---
phase: 10-templui-refactor
plan: 06
type: execute
wave: 3
depends_on: ["10-01", "10-04", "10-05"]
files_modified:
  - templates/pages/admin/dashboard.templ
  - templates/pages/admin/upload.templ
  - templates/pages/admin/queue_dashboard.templ
  - templates/pages/admin/ai_review.templ
autonomous: true

must_haves:
  truths:
    - "Dashboard stat cards use templUI card component"
    - "Upload page uses templUI button and card components"
    - "Queue dashboard uses consistent styling"
    - "AI review page uses templUI components"
    - "All remaining pages have consistent styling"
  artifacts:
    - path: "templates/pages/admin/dashboard.templ"
      provides: "Dashboard with templUI card component"
      contains: "card.Card"
    - path: "templates/pages/admin/upload.templ"
      provides: "Upload page with templUI components"
      contains: "button.Button"
  key_links:
    - from: "templates/pages/admin/dashboard.templ"
      to: "components/card/card.templ"
      via: "import and component usage"
      pattern: 'card\.Card'
---

<objective>
Complete templUI refactor for remaining pages

Purpose: Apply templUI components to the dashboard, upload, queue dashboard, and AI review pages to complete the full application refactor.

Output: All admin pages using templUI components consistently
</objective>

<execution_context>
@/home/bjk/.claude/get-shit-done/workflows/execute-plan.md
@/home/bjk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-templui-refactor/10-CONTEXT.md
@.planning/phases/10-templui-refactor/10-RESEARCH.md

@templates/pages/admin/dashboard.templ
@templates/pages/admin/upload.templ
@templates/pages/admin/queue_dashboard.templ
@templates/pages/admin/ai_review.templ
@components/card/card.templ
@components/button/button.templ
</context>

<tasks>

<task type="auto">
  <name>Task 1: Refactor Dashboard page</name>
  <files>templates/pages/admin/dashboard.templ</files>
  <action>
Update the dashboard page to use templUI card component:

1. Add imports:
```go
import "docko/components/card"
```

2. Replace StatCard template to use templUI card:
```go
templ StatCard(title, value, change, cardType string) {
    @card.Card() {
        @card.Header(card.HeaderProps{Class: "flex flex-row items-center justify-between space-y-0 pb-2"}) {
            @card.Title(card.TitleProps{Class: "text-sm font-medium text-muted-foreground"}) {
                { title }
            }
            @StatIcon(cardType)
        }
        @card.Content(card.ContentProps{Class: "pt-0"}) {
            <div class="text-2xl font-bold">{ value }</div>
            <p class={ "text-xs", templ.KV("text-green-500", change[0] == '+'), templ.KV("text-red-500", change[0] == '-') }>
                { change } from last month
            </p>
        }
    }
}
```

3. Replace "Recent Activity" section with templUI card:
```go
@card.Card() {
    @card.Header() {
        @card.Title() { Recent Activity }
    }
    @card.Content() {
        <div class="space-y-4">
            @ActivityItem("New user registered", "2 minutes ago")
            // ... more items
        </div>
    }
}
```

4. Replace "Quick Actions" section with templUI card and button:
```go
@card.Card() {
    @card.Header() {
        @card.Title() { Quick Actions }
    }
    @card.Content() {
        <div class="grid grid-cols-2 gap-4">
            @button.Button(button.Props{
                Variant: button.VariantOutline,
                Class:   "h-auto p-4 flex flex-col items-start",
            }) {
                <div class="font-medium">Add User</div>
                <div class="text-sm text-muted-foreground">Create new account</div>
            }
            // ... more buttons
        </div>
    }
}
```

5. Keep the StatIcon template as-is (SVG icons)

6. Update ActivityItem to use consistent styling:
```go
templ ActivityItem(title, time string) {
    <div class="flex items-center justify-between py-2 border-b border-border last:border-0">
        <span class="text-sm text-foreground">{ title }</span>
        <span class="text-xs text-muted-foreground">{ time }</span>
    </div>
}
```

Note: The dashboard currently has placeholder data. This task focuses on templUI component usage, not the actual data.
  </action>
  <verify>
- Check air-combined.log for compilation errors
- Visit / (dashboard) and verify:
  - Stat cards render with templUI card styling
  - Recent Activity card renders correctly
  - Quick Actions card with buttons renders correctly
  - All cards have consistent border/shadow styling
  </verify>
  <done>
- Dashboard stat cards use templUI card component
- Activity and Quick Actions sections use templUI card
- Quick action buttons use templUI button component
- Visual consistency with rest of application
  </done>
</task>

<task type="auto">
  <name>Task 2: Refactor Upload page</name>
  <files>templates/pages/admin/upload.templ</files>
  <action>
Update the upload page to use templUI components:

1. Add imports:
```go
import "docko/components/button"
import "docko/components/card"
```

2. If upload page has a drag-drop zone, wrap it in card:
```go
@card.Card(card.Props{Class: "border-dashed"}) {
    @card.Content(card.ContentProps{Class: "flex flex-col items-center justify-center py-12"}) {
        // Drag-drop content
    }
}
```

3. Replace upload button(s) with templUI button:
```go
@button.Button(button.Props{
    Type: button.TypeButton,
    Attributes: templ.Attributes{
        "onclick": "document.getElementById('file-input').click()",
    },
}) {
    Select Files
}
```

4. Update any status messages or progress indicators to use consistent styling

5. Ensure the page follows the same layout patterns as other admin pages

Note: Review upload.templ first to understand its current structure before making changes.
  </action>
  <verify>
- Check air-combined.log for compilation errors
- Visit /upload and verify:
  - Drag-drop zone renders correctly
  - Upload buttons work
  - File selection works
  - Upload progress (if any) displays correctly
  </verify>
  <done>
- Upload page uses templUI card and button components
- Drag-drop zone styled consistently
- Upload functionality preserved
  </done>
</task>

<task type="auto">
  <name>Task 3: Refactor Queue Dashboard and AI Review pages</name>
  <files>templates/pages/admin/queue_dashboard.templ, templates/pages/admin/ai_review.templ</files>
  <action>
Update remaining admin pages:

**1. queue_dashboard.templ:**

Add imports and update:
- Use templUI card for queue stats
- Use templUI badge for queue status indicators
- Use templUI button for any action buttons (retry, clear, etc.)
- Use templUI table if there's a job list

Example for queue stats:
```go
@card.Card() {
    @card.Header(card.HeaderProps{Class: "pb-2"}) {
        @card.Title(card.TitleProps{Class: "text-sm font-medium"}) {
            { queueName }
        }
    }
    @card.Content(card.ContentProps{Class: "pt-0"}) {
        <div class="flex items-center gap-4">
            <div>
                <span class="text-2xl font-bold">{ pendingCount }</span>
                <span class="text-xs text-muted-foreground ml-1">pending</span>
            </div>
            <div>
                <span class="text-2xl font-bold">{ failedCount }</span>
                <span class="text-xs text-muted-foreground ml-1">failed</span>
            </div>
        </div>
    }
}
```

**2. ai_review.templ:**

Add imports and update:
- Use templUI card for suggestion cards
- Use templUI badge for confidence scores
- Use templUI button for accept/reject actions
- Use templUI table if there's a suggestion list

Example for suggestion card:
```go
@card.Card() {
    @card.Header() {
        @card.Title() { { suggestionType }: { suggestedValue } }
        @card.Description() {
            @badge.Badge(badge.Props{Variant: badge.VariantSecondary}) {
                { fmt.Sprintf("%.0f%%", confidence * 100) } confidence
            }
        }
    }
    @card.Content() {
        // Suggestion details
    }
    @card.Footer(card.FooterProps{Class: "flex gap-2"}) {
        @button.Button(button.Props{
            Size: button.SizeSm,
            Attributes: templ.Attributes{
                "hx-post": acceptURL,
                // ...
            },
        }) {
            Accept
        }
        @button.Button(button.Props{
            Variant: button.VariantOutline,
            Size:    button.SizeSm,
            Attributes: templ.Attributes{
                "hx-post": rejectURL,
                // ...
            },
        }) {
            Reject
        }
    }
}
```

Review each file's current structure before making changes.
  </action>
  <verify>
- Check air-combined.log for compilation errors
- Visit /queues and verify:
  - Queue stats display correctly
  - Action buttons work
  - Status indicators use badges
- Visit /ai/review and verify:
  - Suggestion cards display correctly
  - Accept/reject buttons work
  - Confidence badges display correctly
  </verify>
  <done>
- Queue dashboard uses templUI card, badge, and button components
- AI review page uses templUI card, badge, and button components
- All remaining admin pages have consistent templUI styling
  </done>
</task>

</tasks>

<verification>
1. Application compiles without errors
2. Dashboard renders with templUI cards
3. Upload page works correctly
4. Queue dashboard renders correctly
5. AI review page works correctly
6. All admin pages have consistent visual styling
7. Dark mode works on all pages
</verification>

<success_criteria>
- All admin pages use templUI components
- Visual consistency achieved across the entire application
- All functionality preserved
- No regressions in any page
- Dark mode works correctly everywhere
</success_criteria>

<output>
After completion, create `.planning/phases/10-templui-refactor/10-06-SUMMARY.md`
</output>
